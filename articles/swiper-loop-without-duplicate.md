---
title: "Swiper.jsã§swiper-slideã‚’è¤‡è£½ã•ã›ãšã«ï¼ˆloop: trueã‚’ä½¿ã‚ãšã«ï¼‰ãƒ«ãƒ¼ãƒ—ã‚’å®Ÿè£…ã™ã‚‹"
emoji: "ğŸ”"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["javascript", "swiper"]
published: true
---

Swiperã«å‚™ãˆä»˜ã‘ã®æ©Ÿèƒ½ã§ã‚ã‚‹ã€Œloop: trueã€ã‚’ä½¿ã‚ãšã«ãƒ«ãƒ¼ãƒ—ã•ã›ã‚‹æ–¹æ³•ã§ã™ã€‚

## ãã‚‚ãã‚‚ãªã‚“ã§ç´ ç›´ã«loopæ©Ÿèƒ½ã‚’ä½¿ã‚ãªã„ã®ã‹

çŠ¶æ³ã«ã‚ˆã£ã¦ã¯ã€loopæ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ä¸å…·åˆãŒç™ºç”Ÿã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚  
ãŸã¶ã‚“Swiperæ„›ç”¨ã—ã¦ã„ã¦ã“ã®å•é¡Œã«é­é‡ã—ãŸã“ã¨ãŒã‚ã‚‹æ–¹ã¯å¤šã„ã®ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚ã€‚ğŸ˜«  
ä¸‹è¨˜ãŒãã®ä¾‹ã§ã™ã€‚

@[codepen](https://codepen.io/ttt3pu/pen/wvgjVGv)

ã‚¹ãƒ©ã‚¤ãƒ‰å†…ã®ç”»åƒã‚’æŠ¼ã—ãŸã¨ãã«ã€ã‚¹ãƒ©ã‚¤ãƒ‰ç•ªå·ã‚’ã‚¢ãƒ©ãƒ¼ãƒˆã§è¡¨ç¤ºã™ã‚‹ã‚ˆã†ãªå®Ÿè£…ã‚’ã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚

```js
document.querySelectorAll('.swiper-slide img').forEach((el, i) => {
  el.addEventListener('click', () => {
    alert(i + 1);
  });
});
```

æœ€åˆã®çŠ¶æ…‹ã‹ã‚‰ã€6ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã«æˆ»ã™ã¨ã€ã‚¢ãƒ©ãƒ¼ãƒˆãŒãªãœã‹å‡ºãŸã‚Šå‡ºãªã‹ã£ãŸã‚Šã™ã‚‹ã“ã¨ã‚’ç¢ºèªã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚ã“ã‚Œã¯loopæ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ãŒåŸå› ã§ã™ã€‚  
loopæ©Ÿèƒ½ã¯ã€è¦‹ãŸç›®ä¸Šè¶³ã‚Šãªã„åˆ†ã®swiper-slideã‚’è¤‡è£½ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€è‡ªç„¶ãªã‚¹ãƒ©ã‚¤ãƒ‰ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿç¾ã•ã›ã¦ã„ã¾ã™ã€‚  
ãã®ãŸã‚ã€è¤‡è£½ã•ã‚ŒãŸã‚¹ãƒ©ã‚¤ãƒ‰ã«ã¯eventListenerç­‰ãŒå¼•ãç¶™ãŒã‚Œãªã„ã®ã§ã€å‹•ã‹ãªããªã£ã¦ã—ã¾ã„ã¾ã™ã€‚  
ç‰¹ã«Vueã¨ã‹Reactã¨ã‹ã‚’æŒŸã‚“ã§è‰²ã€…å‡¦ç†ã™ã‚‹ã¨ãã¯ã€ã“ã®å•é¡ŒãŒé¡•è‘—ã«å‡ºã¦ãã¦ã—ã¾ã„ã¾ã™ã€‚

## å®Ÿè£…ä¾‹

loopæ©Ÿèƒ½ä½¿ã£ãŸã¨ãã¨ã¯é•ã†ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«ã¯ãªã£ã¦ã—ã¾ã„ã¾ã™ãŒã€ã¡ã‚ƒã‚“ã¨ãƒ«ãƒ¼ãƒ—ã—ã¦ã„ã‚‹ã®ãŒç¢ºèªã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚

@[codepen](https://codepen.io/ttt3pu/pen/jOyxjwj)

## å®Ÿè£…ä¾‹ã®ã‚³ãƒ¼ãƒ‰è§£èª¬

### navigationï¼ˆã‚¢ãƒ­ãƒ¼ï¼‰ã®å®Ÿè£…

æ™®é€šã¯[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://swiperjs.com/swiper-api#navigation)ã«å¾“ã£ã¦navigationã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚Œã°è‰¯ã„ã®ã§ã™ãŒã€ã“ã‚Œã‚’ç´ ç›´ã«ä½¿ã£ã¦ã—ã¾ã†ã¨ã€ä¸‹è¨˜ã®ä¾‹ã®ã‚ˆã†ã«ç«¯ã¾ã§æ¥ãŸã¨ãã«éæ´»æ€§ã«ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚

@[codesandbox](https://codesandbox.io/embed/swiper-navigation-gwvly?fontsize=14&hidenavigation=1&theme=dark)

ãã®ãŸã‚ã€navigationã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ä½¿ã‚ãšã«ã€è‡ªå‰ã§ã‚¢ãƒ­ãƒ¼ã‚¯ãƒªãƒƒã‚¯æ™‚ã®å‡¦ç†ã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚

ä¸‹è¨˜ã®Swiperã®APIã‚’çµ„ã¿åˆã‚ã›ã¦å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

props

- `swiper.slides`: swiper-slidesã®DOMãŒé…åˆ—ã§è¿”å´ã•ã‚Œã‚‹ã€‚ã“ã‚Œã®lengthã‚’å–ã‚‹ã“ã¨ã§ã‚¹ãƒ©ã‚¤ãƒ‰ç·æ•°ãŒå–ã‚Œã‚‹
- `swiper.isBeginning`: ç¾åœ¨ã®ã‚¹ãƒ©ã‚¤ãƒ‰ãŒå·¦ç«¯ã®ã¨ãã¯trueãŒè¿”ã£ã¦ãã‚‹
- `swiper.isEnd`: ç¾åœ¨ã®ã‚¹ãƒ©ã‚¤ãƒ‰ãŒå³ç«¯ã®ã¨ãã¯trueãŒè¿”ã£ã¦ãã‚‹

methods

- `swiper.slideTo(é£›ã³å…ˆã®ã‚¹ãƒ©ã‚¤ãƒ‰ç•ªå·)`: ä»»æ„ã®ä½ç½®ã¾ã§ã‚¹ãƒ©ã‚¤ãƒ‰ã•ã›ã‚‹

```js
// ã‚¹ãƒ©ã‚¤ãƒ‰ç·æ•°
const totalSlidesLen = swiper.slides.length;

/**
  * æˆ»ã‚‹ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ã®å‡¦ç†
  */
swiper.el.querySelector('.swiper-button-prev').addEventListener('click', () => {
  if (swiper.isBeginning) {
    swiper.slideTo(totalSlidesLen - 1);
  } else {
    swiper.slideTo(swiper.realIndex - 1);
  }
});
/**
  * é€²ã‚€ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ã®å‡¦ç†
  */
swiper.el.querySelector('.swiper-button-next').addEventListener('click', () => {
  if (swiper.isEnd) {
    swiper.slideTo(0);
  } else {
    swiper.slideTo(swiper.realIndex + 1);
  }
});
```

### ã‚¹ãƒ¯ã‚¤ãƒ—æ™‚ã®æŒ™å‹•ã®ä¿®æ­£

Swiperã®APIã§ã‚ã‚‹ `touchStart` ã¨ `touchEnd` ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€Swiperä¸Šã§ã‚¿ãƒƒãƒã•ã‚ŒãŸã¨ãã¨ã‚¿ãƒƒãƒãŒé›¢ã‚ŒãŸã¨ãã‚’ç›£è¦–ã—ã¦å‡¦ç†ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚  
ã“ã‚Œã‚’åˆ©ç”¨ã—ã¦ã€ç«¯ã§ã‚¹ãƒ¯ã‚¤ãƒ—ã•ã‚ŒãŸã¨ãã«é€†å´ã«ã‚¹ãƒ©ã‚¤ãƒ‰ã•ã›ã‚‹å‡¦ç†ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

```js
/**
  * Swiperä¸Šã§ãƒ‰ãƒ©ãƒƒã‚°ã•ã‚Œå§‹ã‚ãŸã¨ãã®å‡¦ç†
  */
touchStart(swiper, e) {
  /**
    * ã‚¿ãƒƒãƒã•ã‚ŒãŸXåº§æ¨™ã‚’ä¿å­˜
    * ã‚¿ãƒƒãƒæ™‚ã¨ã‚¯ãƒªãƒƒã‚¯æ™‚ã§ã‚¤ãƒ™ãƒ³ãƒˆã®è¿”ã‚Šå€¤ãŒå¤‰ã‚ã‚‹ãŸã‚å‡¦ç†ã‚’åˆ†å²
    */
  if (e.type === 'touchstart') {
    swiperTouchStartX = e.touches[0].clientX;
  } else {
    swiperTouchStartX = e.clientX;
  }
},
/**
  * Swiperä¸Šã§ãƒ‰ãƒ©ãƒƒã‚°ã—çµ‚ã‚ã£ãŸã¨ãã®å‡¦ç†
  */
touchEnd(swiper, e) {
  // ã‚¹ãƒ¯ã‚¤ãƒ—åˆ¤å®šã®ã—ãã„å€¤
  const tolerance = 150;
  // ã‚¹ãƒ©ã‚¤ãƒ‰ç·æ•°
  const totalSlidesLen = swiper.slides.length;

  // å·¦ã«ã‚¹ãƒ¯ã‚¤ãƒ—ã—ãŸã‹å³ã«ã‚¹ãƒ¯ã‚¤ãƒ—ã—ãŸã‹ã‚’åˆ¤å®š
  const diff = (() => {
    if (e.type === 'touchend') {
      return e.changedTouches[0].clientX - swiperTouchStartX;
    } else {
      return e.clientX - swiperTouchStartX;
    }
  })();

  /**
    * ã‚¿ãƒƒãƒé–‹å§‹æ™‚ã¨ã€ã‚¿ãƒƒãƒçµ‚äº†æ™‚ã®ã‚«ãƒ¼ã‚½ãƒ«ã®åº§æ¨™ã‚’æ¯”è¼ƒã—ã€ä¸‹è¨˜ã®ã©ã¡ã‚‰ã‹ã«åˆ†å²ã•ã›ã‚‹ã€‚
    */
  // æœ€åˆã®ã‚¹ãƒ©ã‚¤ãƒ‰ä¸Šã§å·¦ã«ã‚¹ãƒ¯ã‚¤ãƒ—ã•ã‚ŒãŸã¨ãã¯æœ€å¾Œã®ã‚¹ãƒ©ã‚¤ãƒ‰ã«é£›ã°ã™
  if (swiper.isBeginning && diff >= tolerance) {
    swiper.slideTo(totalSlidesLen - 1);
  // æœ€å¾Œã®ã‚¹ãƒ©ã‚¤ãƒ‰ä¸Šã§å³ã«ã‚¹ãƒ¯ã‚¤ãƒ—ã•ã›ãŸã¨ãã¯æœ€åˆã®ã‚¹ãƒ©ã‚¤ãƒ‰ã«é£›ã°ã™
  } else if (swiper.isEnd && diff <= -tolerance) {
    // ä¸€ç¬å¾…ã£ã¦ã‹ã‚‰æœ€åˆã®ã‚¹ãƒ©ã‚¤ãƒ‰ã«é£›ã°ã™
    // ï¼ˆå°‘ã—é…ã‚‰ã›ãªã„ã¨ã€æœ€åˆã®ã‚¹ãƒ©ã‚¤ãƒ‰ã«æˆ»ã£ãŸå¾Œã«å³ã‚¹ãƒ¯ã‚¤ãƒ—åˆ¤å®šãŒèµ°ã£ã¦2ç•ªç›®ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã«é£›ã°ã•ã‚Œã¦ã—ã¾ã†ãŸã‚ï¼‰
    setTimeout(() => {
      swiper.slideTo(0);
    }, 1);
  }
},
```
